{% load static %}
<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinterest</title>
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
</head>

<body>
    <div class="w-screen">
        <!-- navbar -->
        <div class="flex text-white items-center justify-between w-screen bg-red-400 px-4 h-[60px] ">
            <a href="{% url 'home' %}"><p class="font-extrabold text-white text-[26px]">PinIt</p></a>

            
            <ul class="mr-3 flex items-center justify-around">
                {% if user.is_authenticated %}
                <li class="nav-links"><a href="{% url 'create' %}">CREATE</a></li>
                <li class="nav-links"><a href="">PROFILE</a></li>
                <form action="{% url 'logout' %}" method="POST">
                    {% csrf_token %}
                    <button class="nav-links">LOGOUT</button>
                
                </form>
                {%else%}
                <li class="nav-links"><a href="{% url 'register' %}">REGISTER</a></li>
                <li class="nav-links"><a href="{% url 'login' %}">LOGIN</a></li>
                
                {%endif%}
                
                
            </ul>
        </div>
    </div> 

    {% block content%}


    
    
    {% endblock content%}
    
    <script src="/static/logic.js">

    </script>

</body>

</html>































<!-- {% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Image</title>
    <link href="{% static 'css/output.css' %}" rel="stylesheet">

</head>

<body>


    <h1>Upload an Image</h1>

    // Form to upload image 
    <form id="imageForm">
        <label for="image">Choose an image:</label>
        <input type="file" id="image" name="image" accept="image/*" required><br><br>

        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required><br><br>

        <label for="author">Author (User ID):</label>
        <input type="number" id="author" name="author" required><br><br>

        <button type="submit">Upload</button>


    </form>

    <div class="flex w-[100%] h-[80%]" id="imagelist">

    </div>

    <script>
        const imageList = document.getElementById('imagelist');

        // Get the form and handle the submit
        document.getElementById('imageForm').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(); // Create FormData object
            const imageFile = document.getElementById('image').files[0]; // Get the image file
            const title = document.getElementById('title').value; // Get the title
            const author = document.getElementById('author').value; // Get the author (user ID)

            // Append the form data
            formData.append('image', imageFile);
            formData.append('title', title);
            formData.append('author', author);

            try {
                const response = await fetch('http://127.0.0.1:8000/api/create/', {
                    method: 'POST',
                    body: formData, // Send the FormData containing the image and other data
                });

                const data = await response.json();
                if (response.ok) {
                    alert('Image uploaded successfully!');
                    console.log(data); // You can log the response or use it as needed
                } else {
                    alert('Error uploading image');
                    console.error(data);
                }
            } catch (error) {
                console.error('Error:', error);
            }




        });

        const loadimg = async () => {
            let api = await fetch('http://127.0.0.1:8000/api/list/')

            let resp = await api.json()
            console.log("Data", resp)
            let data = resp

            for (let i in data) {
                let item = `
                    <div class="w-[50%] h-[70%]">
                        <img class=" w-[50%] h-[40%]" src='${data[i].image}'/>
                        <p class='text-red-600
                        '>${data[i].title}</p>
                        <p>${data[i].author}</p>
                    </div>
                `
                imageList.innerHTML += item;


            }







        }

        loadimg()
    </script>

</body>

</html> -->
